<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文学灵魂伴侣匹配测试 | 发现你的宝藏作家</title>
    <style>
        :root { --primary: #2c1810; --accent: #d4a574; --bg: #f8f4ed; --card: #ffffff; }
        body { background-color: var(--bg); color: var(--primary); font-family: "Noto Serif SC", serif; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; line-height: 1.6; }
        .container { max-width: 600px; width: 92%; background: var(--card); padding: 35px; border-radius: 12px; box-shadow: 0 15px 35px rgba(44,24,16,0.08); text-align: center; border: 1px solid #e0d5c1; }
        .hidden { display: none; }
        h1 { font-weight: 700; font-size: 1.6rem; letter-spacing: 2px; margin-bottom: 20px; color: var(--primary); }
        .btn { background: var(--primary); color: white; border: none; padding: 14px 45px; border-radius: 4px; cursor: pointer; font-size: 1rem; transition: 0.3s; margin-top: 25px; font-family: inherit; }
        .btn:hover { background: var(--accent); letter-spacing: 1px; }
        .progress-container { width: 100%; height: 2px; background: #eee; margin-bottom: 30px; }
        .progress-bar { height: 100%; background: var(--accent); transition: width 0.4s ease; width: 0%; }
        .option-btn { display: block; width: 100%; padding: 16px; margin: 12px 0; border: 1px solid #eee; border-radius: 4px; background: white; cursor: pointer; text-align: left; font-size: 0.95rem; transition: all 0.2s; color: var(--primary); }
        .option-btn:hover { border-color: var(--accent); background: #faf8f5; padding-left: 20px; }
        .result-writer { font-size: 2.2rem; color: var(--primary); margin: 15px 0; border-bottom: 2px solid var(--accent); display: inline-block; padding-bottom: 5px; }
        .bio-box { text-align: left; background: #fdfaf5; padding: 20px; border-radius: 4px; margin: 20px 0; border-left: 4px solid var(--accent); }
        .book-tag { display: inline-block; background: #eee; padding: 4px 10px; margin: 5px; font-size: 0.85rem; border-radius: 2px; }
    </style>
</head>
<body>

<div class="container" id="app">
    <div id="home-view">
        <h1>寻找你的文学灵魂伴侣</h1>
        <p style="color:#666; font-size: 0.9rem;">基于7个审美维度，从60位全球作家中<br>为你匹配命中注定的文学指引。</p>
        <button class="cta-button" onclick="startTest()">
            <span class="button-text">开始测试</span>
            <span class="button-arrow">→</span>
        </button>
    </div>

    <div id="test-view" class="hidden">
        <div class="progress-container"><div id="progress" class="progress-bar"></div></div>
        <div id="step-indicator" style="font-size: 0.8rem; color: #999; margin-bottom: 10px;">1 / 14</div>
        <h2 id="question-text" style="font-size: 1.15rem; margin-bottom: 25px;"></h2>
        <div id="options-box"></div>
    </div>

    <div id="result-view" class="hidden">
        <p style="letter-spacing: 3px; font-size: 0.8rem; color: #999;">测试报告 / TEST REPORT</p>
        <div class="result-writer" id="match-name"></div>
        <div class="bio-box">
            <p id="match-bio" style="margin-top:0; font-weight: bold;"></p>
            <p id="match-feature" style="font-size: 0.9rem; color: #555;"></p>
        </div>
        <div style="text-align: left;">
            <p style="font-size: 0.85rem; font-weight: bold; margin-bottom: 5px;">【灵魂书单】</p>
            <div id="match-books"></div>
        </div>
        <button class="btn" onclick="location.reload()">重新探索</button>
    </div>
</div>

<script>
// --- 60位作家完整名单（严格按照你提供的逻辑和评分录入） ---
const writersData = [
    // --- 中文作家 (30位) ---
    { name: "余华", bio: "现实残酷的代言人", feature: "以简洁有力的文字直击生存本质，不回避苦难，反而从中汲取力量。", books: ["《活着》", "《许三观卖血记》"], scores: { style: 9, visual: 5, words: 8, pacing: 7, emotion: 10, relation: 8, theme: 9 } },
    { name: "村上春树", bio: "都市孤独的诗人", feature: "在超现实与现实之间寻找自我，某种程度上是现代人孤独感的避难所。", books: ["《挪威的森林》", "《海边的卡夫卡》"], scores: { style: 7, visual: 8, words: 7, pacing: 6, emotion: 9, relation: 7, theme: 8 } },
    { name: "颜歌", bio: "平乐镇文学宇宙", feature: "以极致的方言写出后现代的人间烟火，优雅与世俗的完美平衡。", books: ["《平乐县志》", "《五月女王》"], scores: { style: 9, visual: 7, words: 9, pacing: 6, emotion: 7, relation: 8, theme: 8 } },
    { name: "班宇", bio: "冷峻克制的东北叙事", feature: "文字像冰冻的河水，底下暗涌着普通人被时代碾压后的温情。", books: ["《冬泳》", "《逍遥游》"], scores: { style: 8, visual: 7, words: 6, pacing: 7, emotion: 8, relation: 8, theme: 8 } },
    { name: "郑在欢", bio: "城市边缘的具体现场", feature: "没有滤镜地记录底层生活，充满生猛而真实的力量。", books: ["《女工记》", "《浮》"], scores: { style: 7, visual: 6, words: 6, pacing: 7, emotion: 9, relation: 9, theme: 9 } },
    { name: "李娟", bio: "阿勒泰的清新之风", feature: "最纯粹的自然主义，带你逃离都市，回到万物生长的原野。", books: ["《我的阿勒泰》", "《冬牧场》"], scores: { style: 6, visual: 9, words: 7, pacing: 4, emotion: 8, relation: 7, theme: 6 } },
    { name: "钟晓阳", bio: "香港文学、爱情悲凉细腻", feature: "极致的才情，将爱情里的隐忍与破碎写到了骨子里。", books: ["《停车暂借问》"], scores: { style: 8, visual: 7, words: 8, pacing: 5, emotion: 9, relation: 10, theme: 7 } },
    { name: "史铁生", bio: "生命哲思与苦难升华", feature: "在地坛的静思中，将残缺的身体转化为最健全的灵魂。", books: ["《我与地坛》"], scores: { style: 7, visual: 8, words: 9, pacing: 4, emotion: 9, relation: 7, theme: 10 } },
    { name: "王安忆", bio: "上海女性书写、长恨歌式哀婉", feature: "细碎、稠密的叙事风格，将海派文明写到了极致。", books: ["《长恨歌》"], scores: { style: 7, visual: 8, words: 8, pacing: 5, emotion: 8, relation: 9, theme: 8 } },
    { name: "路内", bio: "工厂记忆与青春浪荡", feature: "在工矿区的烟尘中，书写一代人野性而忧伤的青春。", books: ["《少年巴比伦》"], scores: { style: 7, visual: 7, words: 7, pacing: 8, emotion: 9, relation: 8, theme: 7 } },
    { name: "毕飞宇", bio: "最懂女人心的江南人性描写", feature: "对心理活动与权力关系的捕捉极其敏锐，文字细腻如丝。", books: ["《推拿》", "《青衣》"], scores: { style: 8, visual: 7, words: 8, pacing: 7, emotion: 9, relation: 9, theme: 8 } },
    { name: "淡豹", bio: "知识分子的现代性观察", feature: "关注现代都市人的情感碎片与困境，具有极强的思辨感。", books: ["《美满》"], scores: { style: 8, visual: 5, words: 8, pacing: 6, emotion: 6, relation: 7, theme: 9 } },
    { name: "韩寒", bio: "青春叛逆与理想主义", feature: "简洁荒诞的幽默，书写一代人对自由的向往。", books: ["《三重门》"], scores: { style: 7, visual: 6, words: 7, pacing: 8, emotion: 8, relation: 8, theme: 8 } },
    { name: "郭爽", bio: "青年女性的城市漂泊感", feature: "敏感而细腻地捕捉都市漂泊者的微光时刻。", books: ["《正午时踏进光焰》"], scores: { style: 7, visual: 6, words: 7, pacing: 6, emotion: 8, relation: 7, theme: 7 } },
    { name: "张爱玲", bio: "华丽背后的苍凉意境", feature: "冷眼看穿世俗爱情与人性的千疮百孔。", books: ["《倾城之恋》"], scores: { style: 8, visual: 9, words: 10, pacing: 5, emotion: 10, relation: 9, theme: 9 } },
    { name: "萧丽红", bio: "台湾纯爱、佛教禅意", feature: "极尽古典之美，将世俗的爱写出了慈悲与超脱。", books: ["《千江有水千江月》"], scores: { style: 7, visual: 7, words: 8, pacing: 4, emotion: 9, relation: 9, theme: 7 } },
    { name: "阿乙", bio: "县城暴力、人性灰色高手", feature: "极其冷静地解剖小人物的极端心理，具有黑色电影质感。", books: ["《灰故事》"], scores: { style: 8, visual: 6, words: 6, pacing: 8, emotion: 7, relation: 6, theme: 8 } },
    { name: "阎连科", bio: "神实主义先锋", feature: "用荒诞到极致的想象，书写最真实的乡村中国。", books: ["《受活》"], scores: { style: 10, visual: 9, words: 8, pacing: 7, emotion: 8, relation: 7, theme: 9 } },
    { name: "叶广芩", bio: "老北京旗民、贵气与俏皮", feature: "书写家族史的没落，文字中自带一种豁达的贵气。", books: ["《状元媒》"], scores: { style: 7, visual: 8, words: 8, pacing: 6, emotion: 8, relation: 9, theme: 7 } },
    { name: "沈从文", bio: "湘西边地的牧歌", feature: "用最清澈的文字，守护人性中最后的一点纯粹与尊严。", books: ["《边城》"], scores: { style: 6, visual: 10, words: 9, pacing: 4, emotion: 8, relation: 8, theme: 7 } },
    { name: "麦家", bio: "孤独的解密者", feature: "在黑暗的谍战背景下，书写人类天才的脆弱与坚守。", books: ["《解密》", "《风声》"], scores: { style: 8, visual: 7, words: 7, pacing: 9, emotion: 8, relation: 7, theme: 8 } },
    { name: "迟子建", bio: "北方大地的厚重慈悲", feature: "在冰雪封冻的土地上，书写万物生长的温暖与轮回。", books: ["《额尔古纳河右岸》"], scores: { style: 7, visual: 9, words: 8, pacing: 5, emotion: 9, relation: 9, theme: 9 } },
    { name: "格非", bio: "先锋派的古典回归", feature: "在时间的回廊中，探讨个人命运与江南梦碎的博弈。", books: ["《人面桃花》"], scores: { style: 9, visual: 8, words: 9, pacing: 6, emotion: 7, relation: 8, theme: 9 } },
    { name: "张悦然", bio: "少女残酷青春的蜕变", feature: "从暴烈的爱恨走向内敛的审视，文字精致且富有张力。", books: ["《茧》"], scores: { style: 8, visual: 7, words: 8, pacing: 6, emotion: 9, relation: 8, theme: 8 } },
    { name: "葛亮", bio: "南北交融的匠人精神", feature: "在宏大的历史叙事中，细致入微地还原民间工艺与风骨。", books: ["《朱雀》", "《北鸢》"], scores: { style: 8, visual: 8, words: 9, pacing: 6, emotion: 8, relation: 9, theme: 9 } },
    { name: "袁哲生", bio: "捉迷藏的孤独症候群", feature: "台湾短篇高手，将人与人之间的疏离写到了极致。", books: ["《寂寞的游戏》"], scores: { style: 9, visual: 6, words: 8, pacing: 5, emotion: 9, relation: 6, theme: 8 } },
    { name: "林奕含", bio: "极致痛苦的房思琪式呐喊", feature: "用最华美的辞藻去包裹最崩塌的人生，令人心碎的文学。", books: ["《房思琪的初恋乐园》"], scores: { style: 8, visual: 8, words: 10, pacing: 6, emotion: 10, relation: 9, theme: 10 } },
    { name: "骆以军", bio: "后现代碎片迷宫", feature: "高难度的写作，挑战逻辑、想象力与梦境的边界。", books: ["《西夏旅馆》"], scores: { style: 10, visual: 8, words: 9, pacing: 7, emotion: 7, relation: 6, theme: 9 } },
    { name: "孙频", bio: "暴烈哥特式叙事", feature: "深度挖掘人性阴暗处的爱与痛，极具视觉张力。", books: ["《鲛在水中央》"], scores: { style: 9, visual: 8, words: 8, pacing: 7, emotion: 9, relation: 8, theme: 8 } },
    { name: "西西", bio: "香港童话与城市拼贴", feature: "以孩童般纯真的视角，观察复杂多变的都市现实。", books: ["《我城》"], scores: { style: 9, visual: 9, words: 8, pacing: 6, emotion: 7, relation: 7, theme: 8 } },

    // --- 外国作家 (30位) ---
    { name: "卡夫卡", bio: "荒诞现代主义奠基人", feature: "你是这个世界的局外人吗？他最懂你无处安放的焦虑。", books: ["《变形记》"], scores: { style: 10, visual: 7, words: 8, pacing: 7, emotion: 6, relation: 6, theme: 10 } },
    { name: "博尔赫斯", bio: "迷宫制作者、虚构大师", feature: "如果你喜欢哲学思考与数学般精确的想象力，他是唯一。", books: ["《虚构集》"], scores: { style: 10, visual: 9, words: 10, pacing: 5, emotion: 5, relation: 4, theme: 10 } },
    { name: "费兰特", bio: "那不勒斯女性史诗", feature: "匿名背后是最赤裸的真实，剖析女性成长的痛苦。", books: ["《我的天才女友》"], scores: { style: 8, visual: 7, words: 8, pacing: 7, emotion: 9, relation: 10, theme: 8 } },
    { name: "加缪", bio: "存在主义、荒诞反抗者", feature: "在荒谬的世界中寻找反抗的意义，清醒且迷人。", books: ["《局外人》"], scores: { style: 8, visual: 6, words: 7, pacing: 7, emotion: 6, relation: 6, theme: 10 } },
    { name: "胡安·鲁尔福", bio: "魔幻现实主义根源", feature: "极简主义的高峰，在阴阳模糊的地界探讨人性轮回。", books: ["《佩德罗·巴拉莫》"], scores: { style: 10, visual: 9, words: 8, pacing: 5, emotion: 8, relation: 7, theme: 9 } },
    { name: "茨威格", bio: "心理描写与欧洲挽歌", feature: "对人类情感的洞察细腻到令人屏息，情感浓烈。", books: ["《昨日的世界》"], scores: { style: 8, visual: 7, words: 8, pacing: 6, emotion: 9, relation: 8, theme: 9 } },
    { name: "石黑一雄", bio: "记忆、遗忘与错位的忠诚", feature: "克制到极致的笔法，从不书写悲伤，却让你泪流满面。", books: ["《长日将尽》"], scores: { style: 8, visual: 8, words: 8, pacing: 5, emotion: 9, relation: 9, theme: 9 } },
    { name: "保罗·奥斯特", bio: "后现代巧合与命运", feature: "擅长在悬疑外壳下，探讨身份认同与人生的荒诞巧合。", books: ["《纽约三部曲》"], scores: { style: 9, visual: 7, words: 8, pacing: 8, emotion: 7, relation: 7, theme: 9 } },
    { name: "卡尔维诺", bio: "轻盈叙事大师", feature: "文学界的魔法师，作品轻盈如烟，却承载深邃哲学。", books: ["《看不见的城市》"], scores: { style: 10, visual: 10, words: 9, pacing: 7, emotion: 6, relation: 5, theme: 10 } },
    { name: "伊莎贝尔·阿连德", bio: "拉美魔幻、女性史诗", feature: "文字色彩极其浓郁，将家族命运与历史风云交织。", books: ["《幽灵之家》"], scores: { style: 8, visual: 9, words: 8, pacing: 7, emotion: 8, relation: 9, theme: 8 } },
    { name: "多丽丝·莱辛", bio: "社会真相的解剖者", feature: "像手术刀，冷静、锋利地剖析性别、阶级与政治。", books: ["《金色笔记》"], scores: { style: 8, visual: 7, words: 8, pacing: 6, emotion: 8, relation: 8, theme: 9 } },
    { name: "阿特伍德", bio: "反乌托邦女王", feature: "对未来保持警觉，构建出一个个冷冽真实的政治寓言。", books: ["《使女的故事》"], scores: { style: 8, visual: 7, words: 8, pacing: 8, emotion: 7, relation: 8, theme: 10 } },
    { name: "亚当·扎加耶夫斯基", bio: "波兰流亡诗学", feature: "在日常琐碎中捕捉到永恒的、不被摧毁的美。", books: ["《无形之手》"], scores: { style: 9, visual: 7, words: 9, pacing: 4, emotion: 8, relation: 5, theme: 10 } },
    { name: "普鲁斯特", bio: "时间的追寻者", feature: "如果你的灵魂沉溺于细节、回忆与意识的流动。", books: ["《追寻逝去的时光》"], scores: { style: 9, visual: 8, words: 10, pacing: 2, emotion: 7, relation: 6, theme: 9 } },
    { name: "菲茨杰拉德", bio: "爵士时代的挽歌", feature: "华美文字背后，是幻梦破灭后最深刻的忧伤。", books: ["《了不起的盖茨比》"], scores: { style: 8, visual: 10, words: 9, pacing: 7, emotion: 9, relation: 9, theme: 8 } },
    { name: "帕慕克", bio: "东西方文明的缝隙", feature: "在博斯普鲁斯海峡的忧郁中，寻找记忆与历史迷宫。", books: ["《我的名字叫红》"], scores: { style: 9, visual: 9, words: 9, pacing: 5, emotion: 8, relation: 8, theme: 10 } },
    { name: "京极夏彦", bio: "妖怪推理、民俗之美", feature: "博大精深的民俗知识，包裹着最极致的人性病理学。", books: ["《魍魉之匣》"], scores: { style: 8, visual: 8, words: 7, pacing: 6, emotion: 6, relation: 7, theme: 8 } },
    { name: "米兰·昆德拉", bio: "生命中不能承受之轻", feature: "在政治与性之间，探讨存在的沉重与虚无。", books: ["《不朽》"], scores: { style: 9, visual: 6, words: 8, pacing: 7, emotion: 7, relation: 8, theme: 10 } },
    { name: "萨拉马戈", bio: "失明症候群、寓言大师", feature: "极长的句子，构建出让人无法呼吸的极端社会实验。", books: ["《失明症漫记》"], scores: { style: 10, visual: 7, words: 8, pacing: 8, emotion: 8, relation: 7, theme: 10 } },
    { name: "伍尔夫", bio: "意识流与女性空间", feature: "文字像波浪一样涌动，捕捉瞬间最细微的情绪变化。", books: ["《达洛维夫人》"], scores: { style: 9, visual: 9, words: 10, pacing: 3, emotion: 9, relation: 7, theme: 9 } },
    { name: "马尔克斯", bio: "百年孤寂、魔幻之源", feature: "将拉丁美洲的现实与神话无缝衔接，恢弘壮丽。", books: ["《霍乱时期的爱情》"], scores: { style: 9, visual: 10, words: 9, pacing: 6, emotion: 9, relation: 9, theme: 10 } },
    { name: "黑塞", bio: "灵魂的漂泊者", feature: "寻找真我的艰难旅途，适合正在经历精神转型的你。", books: ["《悉达多》"], scores: { style: 7, visual: 8, words: 8, pacing: 5, emotion: 8, relation: 6, theme: 10 } },
    { name: "纳博科夫", bio: "词语的炼金术士", feature: "极致的审美挑剔，将语言的感官美发挥到了顶峰。", books: ["《洛丽塔》"], scores: { style: 9, visual: 10, words: 10, pacing: 7, emotion: 8, relation: 7, theme: 9 } },
    { name: "门罗", bio: "短篇小说女王", feature: "在平庸的生活表层下，挖掘出惊心动魄的情感真相。", books: ["《逃离》"], scores: { style: 8, visual: 7, words: 8, pacing: 6, emotion: 9, relation: 9, theme: 9 } },
    { name: "奥斯特洛夫斯基", bio: "时代的钢火", feature: "热烈且纯粹的理想主义，适合内心火热的奋斗者。", books: ["《钢铁是怎样炼成的》"], scores: { style: 6, visual: 7, words: 6, pacing: 9, emotion: 10, relation: 8, theme: 9 } },
    { name: "小泉八云", bio: "怪谈中的幽玄之美", feature: "在灵异与传说中，寻找东方最隐秘的审美情趣。", books: ["《怪谈》"], scores: { style: 8, visual: 9, words: 8, pacing: 7, emotion: 7, relation: 6, theme: 8 } },
    { name: "波德莱尔", bio: "恶之花的颓废诗学", feature: "在丑恶中挖掘美，在沉沦中寻找神性。", books: ["《巴黎的忧郁》"], scores: { style: 9, visual: 9, words: 10, pacing: 4, emotion: 9, relation: 5, theme: 9 } },
    { name: "尤金·奥尼尔", bio: "深沉的悲剧灵魂", feature: "在家庭与命运的纠葛中，直视最原始的人性挣扎。", books: ["《长夜漫漫路迢迢》"], scores: { style: 8, visual: 7, words: 8, pacing: 5, emotion: 10, relation: 10, theme: 9 } },
    { name: "索尔·贝娄", bio: "现代人的智力焦虑", feature: "充满哲思的絮叨，探讨知识分子在现代文明中的位置。", books: ["《赫索格》"], scores: { style: 9, visual: 6, words: 9, pacing: 6, emotion: 7, relation: 7, theme: 9 } },
    { name: "三岛由纪夫", bio: "极致的毁灭美学", feature: "对美有着近乎疯狂的执着，在暴力与优雅间寻找平衡。", books: ["《金阁寺》"], scores: { style: 9, visual: 10, words: 9, pacing: 7, emotion: 9, relation: 7, theme: 9 } }
];

// --- 14道科学题目 (维度对齐版) ---
const questions = [
    { q: "如果你能拥有一张画，你希望它是？", options: [
        { t: "极简的黑白版画，只有冷冽的线条", s: { style: 2, visual: 1, words: 2 } },
        { t: "色彩浓郁、人物繁多的拉美油画", s: { style: 2, visual: 3, words: 1 } },
        { t: "一幅充满隐喻的超现实拼贴图", s: { style: 3, visual: 2, theme: 2 } }
    ]},
    { q: "当你面对一种无法言说的痛苦，你更倾向？", options: [
        { t: "冷峻地剖析它，像做手术一样精准", s: { words: 2, emotion: 1, pacing: 2 } },
        { t: "用优美的词句包裹它，赋予其诗意", s: { style: 2, words: 3, emotion: 2 } },
        { t: "沉默地感受它，在孤独中消化", s: { emotion: 3, relation: 1, theme: 2 } }
    ]},
    { q: "你如何看待一段刻骨铭心的友谊？", options: [
        { t: "即使充满竞争与嫉妒，也是彼此的救赎", s: { relation: 3, emotion: 2 } },
        { t: "它是两个孤独灵魂在荒原上的偶遇", s: { relation: 2, theme: 3, style: 2 } },
        { t: "它是家族、时代背景下的必然连接", s: { relation: 2, theme: 2, pacing: 1 } }
    ]},
    { q: "读到哪里你会最想“标记”？", options: [
        { t: "极其深刻的人生格言、哲学金句", s: { theme: 3, words: 2 } },
        { t: "对感官（气味、光影）惊为天人的描写", s: { visual: 3, words: 3 } },
        { t: "反转惊人、停不下来的情节段落", s: { pacing: 3, style: 1 } }
    ]},
    { q: "选择你理想中的生活节奏：", options: [
        { t: "慢火炖煮，不放过任何细腻的细节", s: { pacing: 1, visual: 2, style: 2 } },
        { t: "大步流星，情节跌宕起伏", s: { pacing: 3, emotion: 1 } },
        { t: "像梦游一样，在碎片中跳跃", s: { pacing: 2, style: 3, visual: 1 } }
    ]},
    { q: "你认为文学最大的作用是？", options: [
        { t: "让我发现自己从未意识到的真相", s: { theme: 3, emotion: 2, style: 2 } },
        { t: "为我疲倦的生活提供一处避难所", s: { emotion: 3, visual: 2 } },
        { t: "见证那些正在消失的人群与历史", s: { theme: 2, relation: 2, pacing: 1 } }
    ]},
    { q: "哪种“孤独”更让你有共鸣？", options: [
        { t: "被人群推挤、被体制束缚的现代孤独", s: { theme: 3, relation: 1, style: 2 } },
        { t: "身处旷野、面对宇宙的虚无感", s: { theme: 2, emotion: 2, visual: 3 } },
        { t: "在一场热烈聚会过后的寂寞", s: { emotion: 3, relation: 2, words: 2 } }
    ]},
    { q: "如果要把你的生活拍成电影，色调是？", options: [
        { t: "灰暗、粗颗粒的纪实风格", s: { visual: 1, style: 1, theme: 2 } },
        { t: "柔焦、带有怀旧滤镜的淡彩色", s: { visual: 2, emotion: 2, words: 2 } },
        { t: "高对比度、极其绚烂的色彩", s: { visual: 3, style: 3, emotion: 2 } }
    ]},
    { q: "你喜欢的对话风格是？", options: [
        { t: "极其克制，言下之意远多于字面意思", s: { words: 1, style: 2, theme: 2 } },
        { t: "充满火药味、直接且有力", s: { words: 2, emotion: 3, pacing: 3 } },
        { t: "优雅、富有韵律，像跳舞一样", s: { words: 3, style: 1, visual: 2 } }
    ]},
    { q: "哪种场景更吸引你？", options: [
        { t: "破旧工业区里的一场无声告别", s: { visual: 1, relation: 2, emotion: 2 } },
        { t: "异域海岛上发生的不可思议奇迹", s: { visual: 3, style: 3, pacing: 2 } },
        { t: "一个家族在百年间的兴衰更迭", s: { theme: 2, relation: 3, pacing: 1 } }
    ]},
    { q: "面对社会的虚伪，你更偏向？", options: [
        { t: "冷嘲热讽，保持绝对的清醒", s: { theme: 3, words: 2, style: 2 } },
        { t: "退回内心，守护自己的小天地", s: { theme: 1, emotion: 3, relation: 1 } },
        { t: "与之共存，在灰色地带里生存", s: { theme: 2, pacing: 2, relation: 2 } }
    ]},
    { q: "选择一句你现在的内心独白：", options: [
        { t: "“我只是这个世界的局外人。”", s: { theme: 3, emotion: 2, style: 2 } },
        { t: "“活着本身就是奇迹。”", s: { theme: 1, emotion: 3, visual: 2 } },
        { t: "“我想建立一种深刻的连接。”", s: { relation: 3, emotion: 2, words: 2 } }
    ]},
    { q: "如果你可以选择重生在某个年代？", options: [
        { t: "未来的赛博世界，充满未知", s: { style: 3, visual: 1, theme: 3 } },
        { t: "古典时代，一切都缓慢而从容", s: { pacing: 1, visual: 2, words: 3 } },
        { t: "动荡的黄金时代，充满了浪漫与冲突", s: { emotion: 3, relation: 2, pacing: 3 } }
    ]},
    { q: "测试最后，你希望得到的推荐是？", options: [
        { t: "能让我读到热泪盈眶的故事", s: { emotion: 3, relation: 2 } },
        { t: "能让我大脑开启风暴的著作", s: { theme: 3, style: 3, words: 2 } },
        { t: "能让我静下心来思考余生的作品", s: { theme: 2, emotion: 3, pacing: 1 } }
    ]}
];

// --- 匹配引擎 ---
let currentStep = 0;
let userScores = { style:0, visual:0, words:0, pacing:0, emotion:0, relation:0, theme:0 };

function startTest() {
    console.log("测试开始执行..."); // 调试用，你可以按 F12 查看是否触发
    
    const home = document.getElementById('home-view');
    const test = document.getElementById('test-view');
    
    if (home && test) {
        home.style.display = 'none';    // 强制隐藏首页
        test.style.display = 'block';   // 强制显示题目页
        test.classList.remove('hidden'); // 确保隐藏类被移除
        showQuestion();                 // 启动题目渲染
    } else {
        console.error("找不到页面容器，请检查 HTML ID 是否正确");
    }
}

function showQuestion() {
    const q = questions[currentStep];
    document.getElementById('progress').style.width = ((currentStep / questions.length) * 100) + '%';
    document.getElementById('step-indicator').innerText = `${currentStep + 1} / ${questions.length}`;
    document.getElementById('question-text').innerText = q.q;
    const box = document.getElementById('options-box');
    box.innerHTML = '';
    q.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt.t;
        btn.onclick = () => {
            for(let trait in opt.s) userScores[trait] += opt.s[trait];
            currentStep++;
            if(currentStep < questions.length) showQuestion(); else showResult();
        };
        box.appendChild(btn);
    });
}

function showResult() {
    document.getElementById('test-view').classList.add('hidden');
    document.getElementById('result-view').classList.remove('hidden');
    
    let bestMatch = null;
    let maxSimilarity = -Infinity;

    writersData.forEach(writer => {
        let dotProduct = 0;
        let userMagnitude = 0;
        let writerMagnitude = 0;

        for (let trait in userScores) {
            let userVal = userScores[trait];
            let writerVal = writer.scores[trait] || 5;
            
            dotProduct += userVal * writerVal;
            userMagnitude += userVal * userVal;
            writerMagnitude += writerVal * writerVal;
        }

        let similarity = dotProduct / (Math.sqrt(userMagnitude) * Math.sqrt(writerMagnitude));
        
        if (similarity > maxSimilarity) {
            maxSimilarity = similarity;
            bestMatch = writer;
        }
    });

    // ... 剩下的渲染逻辑保持不变 ...
    document.getElementById('match-name').innerText = bestMatch.name;
    document.getElementById('match-bio').innerText = bestMatch.bio;
    document.getElementById('match-feature').innerText = bestMatch.feature;
    const bookBox = document.getElementById('match-books');
    bookBox.innerHTML = '';
    bestMatch.books.forEach(b => {
        const span = document.createElement('span');
        span.className = 'book-tag';
        span.innerText = b;
        bookBox.appendChild(span);
    });
}

    document.getElementById('match-name').innerText = bestMatch.name;
    document.getElementById('match-bio').innerText = bestMatch.bio;
    document.getElementById('match-feature').innerText = bestMatch.feature;
    const bookBox = document.getElementById('match-books');
    bookBox.innerHTML = '';
    bestMatch.books.forEach(b => {
        const span = document.createElement('span');
        span.className = 'book-tag';
        span.innerText = b;
        bookBox.appendChild(span);
    });
}
</script>
</body>
</html>
